// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import "forge-std/Test.sol";
import "../src/LendingPool.sol";

contract ExploitTest is Test {
    LendingPool public pool;
    address public oracle;
    address public attacker;
    address public victim;

    function setUp() public {
        oracle = makeAddr("oracle");
        attacker = makeAddr("attacker");
        victim = makeAddr("victim");
        
        pool = new LendingPool(oracle);
        
        // Fund accounts
        vm.deal(attacker, 100 ether);
        vm.deal(victim, 100 ether);
        vm.deal(address(pool), 50 ether);
    }

    // TODO: Write PoC for Bug #1 - Price Manipulation
    function test_Exploit_PriceManipulation() public {
        // Your exploit code here
    }

    // TODO: Write PoC for Bug #2 - Reentrancy
    function test_Exploit_Reentrancy() public {
        // Your exploit code here
    }

    // TODO: Write PoC for Bug #3 - Wrong Collateral Calculation
    function test_Exploit_CollateralCalculation() public {
        // Your exploit code here
    }

    // TODO: Write PoC for Bug #4 - Repay Underflow
    function test_Exploit_RepayUnderflow() public {
        // Your exploit code here
    }

    // TODO: Write PoC for Bug #5 - Liquidation Bonus Bug
    function test_Exploit_LiquidationBonus() public {
        // Your exploit code here
    }
}

/// @notice Attacker contract for reentrancy exploit
contract Attacker {
    LendingPool public pool;
    uint256 public attackCount;
    
    constructor(address _pool) {
        pool = LendingPool(payable(_pool));
    }
    
    function attack() external payable {
        // TODO: Implement
    }
    
    receive() external payable {
        // TODO: Implement reentrancy
    }
}
